<!DOCTYPE html>
<html>
<head>



</head>

<body>
    
    <h1>Inspiration</h1>
    <p>An artwork generator, aimed to brighten the viewer's day.</p>


    <form onsubmit="generateSchema()" action="#">
        <fieldset>
            <legend>Moods</legend>
            <table>
                <tr>
                    <td><label for="Happy">Happy</label><input type="checkbox" id="Happy" name="Mood"></td>
                </tr>
                <tr>
                    <td><label for="Sad">Sad</label><input type="checkbox" id="Sad" name="Mood"></td>
                </tr>
                <tr>
                    <td><label for="Angry">Angry</label><input type="checkbox" id="Angry" name="Mood"></td>
                </tr>
                <tr>
                    <td><label for="Bored">Bored</label><input type="checkbox" id="Bored" name="Mood"></td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Dispositions</legend>
            <table>
                <tr>
                    <td><label for="Contented">Contented</label><input type="checkbox" id="Contented" name="Disposition"></td>
                </tr>
                <tr>
                    <td><label for="Depressed">Depressed</label><input type="checkbox" id="Depressed" name="Disposition"></td>
                </tr>
                <tr>
                    <td><label for="Anxious">Anxious</label><input type="checkbox" id="Anxious" name="Disposition"></td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Prospects</legend>
            <table>
                <tr>
                    <td><label for="Hopeful">Hopeful</label><input type="radio" id="Hopeful" name="Prospects"></td>
                </tr>
                <tr>
                    <td><label for="Stressed">Depressed</label><input type="radio" id="Stressed" name="Prospects"></td>
                </tr>
            </table>
        </fieldset>
        <input type="submit" value="Generate">
    </form>



    <img id="originalStencilImage" src="Sunrise - Original.jpg" width="944" height="606" hidden alt="Could not load image; please adjust your settings.">
    <img id="originalGreyscaleImage" src="Sunrise - Greyscale.png" width="944" height="606" hidden alt="Could not load image; please adjust your settings.">
    
    <canvas id="targetCanvas" width="944" height="606"></canvas>

    

    <script>
    
        var img = document.getElementById("originalGreyscaleImage");
        var canvas = document.getElementById("targetCanvas");

        var isHappyCheckbox = document.getElementById("Happy");
        var isHappy = function() { return isHappyCheckbox.checked; }
        var isSadCheckbox = document.getElementById("Sad");
        var isSad = function() { return isSadCheckbox.checked; }
        var isAngryCheckbox = document.getElementById("Angry");
        var isAngry = function() { return isAngryCheckbox.checked; }
        var isBoredCheckbox = document.getElementById("Bored");
        var isBored = function() { return isBoredCheckbox.checked; }

        var isContentedCheckbox = document.getElementById("Contented");
        var isContented = function() { return isContentedCheckbox.checked; }
        var isDepressedCheckbox = document.getElementById("Depressed");
        var isDepressed = function() { return isDepressedCheckbox.checked; }
        var isAnxiousCheckbox = document.getElementById("Anxious");
        var isAnxious = function() { return isAnxiousCheckbox.checked; }
        
        var isHopefulRadio = document.getElementById("Depressed");
        var isHopeful = function() { return isHopefulRadio.checked; }
        var isStressedRadio = document.getElementById("Anxious");
        var isStressed = function() { return isStressedRadio.checked; }

        
        var imgWidth;
        var imgHeight;

        var hueThresholdDelta = 20.0;
        
        var rayHue = 225.0;
        var skyHue = 200.0;
        var backHillHue = 175.0;
        var leftHillHue = 150.0
        var rightHillHue = 125.0
        var waterHue = 100.0;
        var frontHillHue = 75.0;
        var sunHue = 50.0;
        
        var defaultRayHue =     [245, 233, 66, 255];
        var defaultSkyHue =         [66, 173, 245, 255.0];
        var defaultBackHillHue =    [49, 122, 34, 255];
        var defaultLeftHillHue =    [60, 148, 41, 255];
        var defaultRightHillHue =   [96, 173, 80, 255];
        var defaultWaterHue =       [36, 75, 138, 255];
        var defaultFrontHillHue =   [39, 171, 12, 255];
        var defaultSunHue =         [252, 246, 157, 255];
        
        var newRayHue =         [0, 0, 0, 255];
        var newSkyHue =         [0, 0, 0, 255];
        var newBackHillHue =    [0, 0, 0, 255];
        var newLeftHillHue =    [0, 0, 0, 255];
        var newRightHillHue =   [0, 0, 0, 255];
        var newWaterHue =       [0, 0, 0, 255];
        var newFrontHillHue =   [0, 0, 0, 255];
        var newSunHue =         [0, 0, 0, 255];
        

        var generateSchema = function()
        {
            var canvasContext = canvas.getContext("2d");
            canvasContext.drawImage(img, 0, 0);

            // debugs
            /*
            newRayHue = [0.0, 0.0, 0.0, 255.0];
            newSkyHue = [25.0, 25.0, 25.0, 255.0];
            newBackHillHue = [50.0, 50.0, 50.0, 255.0];
            newLeftHillHue = [75.0, 75.0, 75.0, 255.0];
            newRightHillHue = [100.0, 100.0, 100.0, 255.0];
            newWaterHue = [125.0, 125.0, 125.0, 255.0];
            newFrontHillHue = [150.0, 150.0, 150.0, 255.0];
            newSunHue = [175.0, 175.0, 175.0, 255.0];
            */

            newRayHue =         generateHue(defaultRayHue);
            newSkyHue =         generateHue(defaultSkyHue);
            newBackHillHue =    generateHue(defaultBackHillHue);
            newLeftHillHue =    generateHue(defaultLeftHillHue);
            newRightHillHue =   generateHue(defaultRightHillHue);
            newWaterHue =       generateHue(defaultWaterHue);
            newFrontHillHue =   generateHue(defaultFrontHillHue);
            newSunHue =         generateHue(defaultSunHue);

            fillTarget();
        }

        var generateHue = function(original)
        {
            var result = original;
            if(isHappy())
            {
                result[0] += 10;
                result[1] += 10;
                result[2] += 10;
            }
            if(isAngry())
            {
                result[0] += result[0] * 0.5;
            }
            if(isBored)
            {
                result[0] += (result[1] - result[0]) * 0.5;
                result[2] += (result[1] - result[2]) * 0.5;
            }
            if(isSad())
            {
                result[0] -= result[0] * 0.3333;
                result[1] -= result[1] * 0.3333;
                result[2] -= result[2] * 0.3333;
            }
            return result;
        }

        var fillTarget = function()
        {
            //var canvas = document.getElementById("targetCanvas");
            var canvasContext = canvas.getContext("2d");
            var imgData = canvasContext.getImageData(0, 0, canvas.width, canvas.height);
            var pixels = imgData.data;
        
            console.log("pixels.length: " + pixels.length);

            for(var i = 0; i < pixels.length; i += 4)
            {
                var redHue = pixels[i];
                var rgba = [0.0, 0.0, 0.0, 255.0];
        
        
                if(Math.abs(redHue - skyHue) < hueThresholdDelta)
                    rgba = newSkyHue;
        
                else if(Math.abs(redHue - rayHue) < hueThresholdDelta)
                    rgba = newRayHue;
        
                else if(Math.abs(redHue - backHillHue) < hueThresholdDelta)
                    rgba = newBackHillHue;
        
                else if(Math.abs(redHue - leftHillHue) < hueThresholdDelta)
                    rgba = newLeftHillHue;
        
                else if(Math.abs(redHue - rightHillHue) < hueThresholdDelta)
                    rgba = newRightHillHue;
        
                else if(Math.abs(redHue - waterHue) < hueThresholdDelta)
                    rgba = newWaterHue;
        
                else if(Math.abs(redHue - frontHillHue) < hueThresholdDelta)
                    rgba = newFrontHillHue;
        
                else if(Math.abs(redHue - sunHue) < hueThresholdDelta)
                    rgba = newSunHue;
        
        
                pixels[i + 0] = rgba[0];
                pixels[i + 1] = rgba[1];
                pixels[i + 2] = rgba[2];
                pixels[i + 3] = rgba[3];
        
            }
            //imgData.data.set(pixels);
            canvasContext.putImageData(imgData, 0, 0);
        }
        
    </script>
  
    <br>
    <br>
    <br>
    <small>Original obtained from <a href="https://i.pinimg.com/originals/86/a3/d1/86a3d11a2a62555a69fd627d1bb5ce95.jpg">here</a></small>

</body>
