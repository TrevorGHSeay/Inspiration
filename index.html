<!DOCTYPE html>
<html>
<head>



</head>

<body>
    
    <h1>Inspiration</h1>
    <p>An artwork generator, aimed to brighten the viewer's day.</p>



    <form>
        <fieldset>
            <legend>Moods</legend>
            <table>
                <tr>
                    <td><label for="Happy">Happy</label><input type="checkbox" id="Happy" name="Mood"></td>
                </tr>
                <tr>
                    <td><label for="Sad">Sad</label><input type="checkbox" id="Sad" name="Mood"></td>
                </tr>
                <tr>
                    <td><label for="Angry">Angry</label><input type="checkbox" id="Angry" name="Mood"></td>
                </tr>
                <tr>
                    <td><label for="Bored">Bored</label><input type="checkbox" id="Bored" name="Mood"></td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Dispositions</legend>
            <table>
                <tr>
                    <td><label for="Contented">Contented</label><input type="checkbox" id="Contented" name="Disposition"></td>
                </tr>
                <tr>
                    <td><label for="Depressed">Depressed</label><input type="checkbox" id="Depressed" name="Disposition"></td>
                </tr>
                <tr>
                    <td><label for="Anxious">Anxious</label><input type="checkbox" id="Anxious" name="Disposition"></td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Prospects</legend>
            <table>
                <tr>
                    <td><label for="Hopeful">Hopeful</label><input type="radio" checked id="Hopeful" name="Prospects"></td>
                </tr>
                <tr>
                    <td><label for="Doubtful">Doubtful</label><input type="radio" id="Doubtful" name="Prospects"></td>
                </tr>
            </table>
        </fieldset>
    </form>

    <button onclick="generateSchema()">Generate</button>



    <img id="originalStencilImage" src="Sunrise - Original.jpg" width="944" height="606" hidden alt="Could not load image; please adjust your settings.">
    <img id="originalGreyscaleImage" src="Sunrise - Greyscale.png" width="944" height="606" hidden alt="Could not load image; please adjust your settings.">
    
    <canvas id="targetCanvas" width="944" height="606"></canvas>

    

    <script>
    
        var img = document.getElementById("originalGreyscaleImage");
        var canvas = document.getElementById("targetCanvas");

        var isHappyCheckbox = document.getElementById("Happy");
        var isHappy = function() { return isHappyCheckbox.checked; }
        var isSadCheckbox = document.getElementById("Sad");
        var isSad = function() { return isSadCheckbox.checked; }
        var isAngryCheckbox = document.getElementById("Angry");
        var isAngry = function() { return isAngryCheckbox.checked; }
        var isBoredCheckbox = document.getElementById("Bored");
        var isBored = function() { return isBoredCheckbox.checked; }

        var isContentedCheckbox = document.getElementById("Contented");
        var isContented = function() { return isContentedCheckbox.checked; }
        var isDepressedCheckbox = document.getElementById("Depressed");
        var isDepressed = function() { return isDepressedCheckbox.checked; }
        var isAnxiousCheckbox = document.getElementById("Anxious");
        var isAnxious = function() { return isAnxiousCheckbox.checked; }
        
        var isHopefulRadio = document.getElementById("Depressed");
        var isHopeful = function() { return isHopefulRadio.checked; }
        var isDoubtfulRadio = document.getElementById("Anxious");
        var isDoubtful = function() { return isDoubtfulRadio.checked; }

        var imgHalfWidth = canvas.width / 2;

        var imgCenter = [imgHalfWidth, canvas.height / 2];

        var hueThresholdDelta = 20.0;
        
        var rayHue = 225.0;
        var skyHue = 200.0;
        var backHillHue = 175.0;
        var leftHillHue = 150.0
        var rightHillHue = 125.0
        var waterHue = 100.0;
        var frontHillHue = 75.0;
        var sunHue = 50.0;
        
        var defaultRayHue =         [245, 233, 66, 255];
        var defaultSkyHue =         [66, 173, 245, 255];
        var defaultBackHillHue =    [49, 122, 34, 255];
        var defaultLeftHillHue =    [60, 148, 41, 255];
        var defaultRightHillHue =   [96, 173, 80, 255];
        var defaultWaterHue =       [36, 75, 138, 255];
        var defaultFrontHillHue =   [39, 171, 12, 255];
        var defaultSunHue =         [252, 246, 157, 255];
        
        var newBackHillHue =    [0, 0, 0, 255];
        var newLeftHillHue =    [0, 0, 0, 255];
        var newRightHillHue =   [0, 0, 0, 255];
        var newWaterHue =       [0, 0, 0, 255];
        var newFrontHillHue =   [0, 0, 0, 255];
        var newSunHue =         [0, 0, 0, 255];
        

        var generateSchema = function()
        {
            var canvasContext = canvas.getContext("2d");
            canvasContext.drawImage(img, 0, 0);
            
            
            newSunHue =         generatedMoodHue(defaultSunHue);
            newBackHillHue =    generatedMoodHue(defaultBackHillHue);
            newLeftHillHue =    generatedMoodHue(defaultLeftHillHue);
            newRightHillHue =   generatedMoodHue(defaultRightHillHue);
            newFrontHillHue =   generatedMoodHue(defaultFrontHillHue);
            newWaterHue =       generatedMoodHue(defaultWaterHue);


            fillTarget();
        }

        var distanceBetween = function(x1, y1, x2, y2)
        {
            return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
        }

        var generatedProspectHue = function(x, y, original, isInverse)
        {
            var result = [original[0], original[1], original[2], original[3]];
            
            // Brighten
            if(isHopeful())
            {
                result[0] *= 1.1;
                result[1] *= 1.1;
                result[2] *= 1.1;
            }

            // Darken significantly
            else if(isDoubtful())
            {
                result[0] *= 0.666;
                result[1] *= 0.666;
                result[2] *= 0.666;
            }

            var distance = distanceBetween(imgCenter[0], imgCenter[1], x, y);

            var multiplier = distance / imgHalfWidth;

            result[0] *= 1.0 + multiplier;
            result[1] *= 1.0 + multiplier;
            result[2] *= 1.0 + multiplier;

            if(!isInverse)
            {
                result[0] = 255.0 - result[0];
                result[1] = 255.0 - result[1];
                result[2] = 255.0 - result[2];
            }
            
            return result;

        }

        var generatedMoodHue = function(original)
        {
            var result = [original[0], original[1], original[2], original[3]];

            // Brighten
            if(isHappy())
            {
                result[0] += 10.0;
                result[1] += 10.0;
                result[2] += 10.0;
            }

            // Accent red
            if(isAngry())
            {
                result[0] *= 1.333;
            }

            // Dull colours using partial greyscale
            if(isBored)
            {
                result[0] += (result[1] - result[0]) * 0.333;
                result[2] += (result[1] - result[2]) * 0.333;
            }

            // Darken
            if(isSad())
            {
                result[0] *= 0.2;
                result[1] *= 0.2;
                result[2] *= 0.2;
            }

            return result;
        }

        var generatedWaterHueWithOffset = function(x, original)
        {
            var result = [original[0], original[1], original[2], original[3]];
            
            // Get normalized value [0 - 1] representing the distance from center to x, horizontally
            var multiplier = 1.0 - Math.abs(x - imgHalfWidth) / imgHalfWidth;

            result[0] *= 1.0 + multiplier;
            result[1] *= 1.0 + multiplier;
            result[2] *= 1.0 + multiplier;
            
            return result;
        }

        var fillTarget = function()
        {
            //var canvas = document.getElementById("targetCanvas");
            var canvasContext = canvas.getContext("2d");
            var imgData = canvasContext.getImageData(0, 0, canvas.width, canvas.height);
            var pixels = imgData.data;

            for(var i = 0; i < pixels.length; i += 4)
            {
                var redHue = pixels[i];
                var rgba = [0.0, 0.0, 0.0, 255.0];
        
        
                if(Math.abs(redHue - skyHue) < hueThresholdDelta)
                    rgba = generatedProspectHue(i / 4 % canvas.width, i / 4 / canvas.width, defaultSkyHue, true);
        
                else if(Math.abs(redHue - rayHue) < hueThresholdDelta)
                    rgba = generatedProspectHue(i / 4 % canvas.width, i / 4 / canvas.width, defaultRayHue, false);
        
                else if(Math.abs(redHue - backHillHue) < hueThresholdDelta)
                    rgba = newBackHillHue;
        
                else if(Math.abs(redHue - leftHillHue) < hueThresholdDelta)
                    rgba = newLeftHillHue;
        
                else if(Math.abs(redHue - rightHillHue) < hueThresholdDelta)
                    rgba = newRightHillHue;
        
                else if(Math.abs(redHue - waterHue) < hueThresholdDelta)
                    rgba = generatedWaterHueWithOffset(i / 4 % canvas.width, newWaterHue);
        
                else if(Math.abs(redHue - frontHillHue) < hueThresholdDelta)
                    rgba = newFrontHillHue;
        
                else if(Math.abs(redHue - sunHue) < hueThresholdDelta)
                    rgba = newSunHue;
            
                pixels[i + 0] = rgba[0];
                pixels[i + 1] = rgba[1];
                pixels[i + 2] = rgba[2];
                pixels[i + 3] = rgba[3];
        
            }
            //imgData.data.set(pixels);
            canvasContext.putImageData(imgData, 0, 0);
        }
        
    </script>
  
    <br>
    <br>
    <br>
    <small>Original obtained from <a href="https://i.pinimg.com/originals/86/a3/d1/86a3d11a2a62555a69fd627d1bb5ce95.jpg">here</a></small>

</body>
